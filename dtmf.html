<!DOCTYPE html>
<html>
 <head>
	 <title>DTMF Tones</title>
	 <style type="text/css">
	 body {
		 font-family: Arial, Helvetica, sans-serif;
	 }
	 input[type=button] {
		 width: 50px;
		 height: 50px;
		 color: white;
		 font-weight: bold;
		 font-size: 1.5em;
	 }
	 .blue {
		 background-color: blue;
	 }
	 .red {
		 background-color: red;
	 }
	 .gray {
		 background-color: gray;
	 }
	 table {
		 border: 1px solid black;
		 margin: 50px auto;
	 }
	 </style>
 </head>
 <body>
	 <h1>Dual Tone Multiple Frequency (DTMF) with WebAudio</h1>
	 <table>
		 <tr>
			 <td><input type="button" value="1" class="blue" data-freq1="697" data-freq2="1209"/></td>
			 <td><input type="button" value="2" class="blue" data-freq1="697" data-freq2="1336"/></td>
			 <td><input type="button" value="3" class="blue" data-freq1="697" data-freq2="1477"/></td>
			 <td><input type="button" value="A" class="red" data-freq1="697" data-freq2="1633"/></td>
		 </tr>
		 <tr>
			 <td><input type="button" value="4" class="blue" data-freq1="770" data-freq2="1209"/></td>
			 <td><input type="button" value="5" class="blue" data-freq1="770" data-freq2="1336"/></td>
			 <td><input type="button" value="6" class="blue" data-freq1="770" data-freq2="1477"/></td>
			 <td><input type="button" value="B" class="red" data-freq1="770" data-freq2="1633"/></td>
		 </tr>
		 <tr>
			 <td><input type="button" value="7" class="blue" data-freq1="852" data-freq2="1209"/></td>
			 <td><input type="button" value="8" class="blue" data-freq1="852" data-freq2="1336"/></td>
			 <td><input type="button" value="9" class="blue" data-freq1="852" data-freq2="1477"/></td>
			 <td><input type="button" value="C" class="red" data-freq1="852" data-freq2="1633"/></td>
		 </tr>
		 <tr>
			 <td><input type="button" value="*" class="gray" data-freq1="941" data-freq2="1209"/></td>
			 <td><input type="button" value="0" class="blue" data-freq1="941" data-freq2="1336"/></td>
			 <td><input type="button" value="#" class="gray" data-freq1="941" data-freq2="1477"/></td>
			 <td><input type="button" value="D" class="red" data-freq1="941" data-freq2="1633"/></td>
		 </tr>
	 </table>
	 
	 <p>
		This is a little demonstration of using the <a href="https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html">W3C Web Audio API</a> to generate <a href="http://en.wikipedia.org/wiki/Dual-tone_multi-frequency_signaling" target="_blank">DTMF</a> signals within your browser.
	 </p>
	 <script type="text/javascript">
	 	window.AudioContext = window.AudioContext || window.webkitAudioContext;
		context = new AudioContext();
		
		
	 	buttons = document.getElementsByTagName('input');
	 	for (var i = 0; i < buttons.length; i++) {
	 		var button = buttons[i];

			// create a gain node to control output
			button.gain1 = context.createGain();
			button.gain1.gain.value = 0.0;
			button.gain1.connect(context.destination);
			
			// create oscillator sources
			button.osc1 = context.createOscillator();
			button.osc1.frequency.value = button.getAttribute('data-freq1');
			button.osc1.connect(button.gain1);
			
			button.osc2 = context.createOscillator();
			button.osc2.frequency.value = button.getAttribute('data-freq2');
			button.osc2.connect(button.gain1);
			
			button.osc1.start(0);
			button.osc2.start(0);
			
	 		button.onmousedown = function() {
				this.gain1.gain.value = 1.0;
	 		}
			
			button.onmouseup = function() {
				this.gain1.gain.value = 0.0;
			}
	 	}
	</script>
 </body>
</html>